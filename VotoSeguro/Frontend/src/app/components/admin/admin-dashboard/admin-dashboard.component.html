<div class="admin-container">
    <div class="sidebar">
        <div class="logo">VotoSeguro Admin</div>
        <nav>
            <a routerLink="/admin" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Dashboard</a>
            <a routerLink="/admin/candidates" routerLinkActive="active">Candidatos</a>
            <a routerLink="/admin/voters" routerLinkActive="active">Auditoría</a>
        </nav>
    </div>

    <div class="main-content">
        <header>
            <h1>Panel de Control</h1>
            <button class="logout-btn" (click)="logout()">Cerrar Sesión</button>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Votantes</h3>
                <div class="value">{{ totalVoters }}</div>
            </div>
            <div class="stat-card">
                <h3>Votos Emitidos</h3>
                <div class="value">{{ votesCast }}</div>
            </div>
            <div class="stat-card">
                <h3>Participación</h3>
                <div class="value">{{ participation }}%</div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card large">
                <h3>Proyección de Votos por Candidato</h3>
                <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="lineChartType">
                </canvas>
            </div>

            <div class="chart-card">
                <h3>Resultados por Candidato</h3>
                <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
                </canvas>
            </div>

            <div class="chart-card">
                <h3>Distribución de Votos</h3>
                <canvas baseChart [data]="pieChartData" [options]="pieChartOptions" [type]="pieChartType">
                </canvas>
            </div>
        </div>

        <div class="results-table-card">
            <h3>Tabla de Resultados</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Candidato</th>
                        <th>Partido</th>
                        <th>Votos</th>
                        <th>Porcentaje</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="stats?.candidateResults?.length === 0">
                        <td colspan="4" style="text-align: center; color: #64748b; padding: 30px;">
                            No hay candidatos registrados en este momento.
                        </td>
                    </tr>
                    <tr *ngFor="let res of stats?.candidateResults">
                        <td>{{ res.name }}</td>
                        <td>{{ res.party }}</td>
                        <td>{{ res.votes }}</td>
                        <td>{{ res.percentage | number:'1.1-1' }}%</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>